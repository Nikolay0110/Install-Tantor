# Скрипт автоматической установки и настройки СУБД Tantor

## Описание выполняемых действий
1. Установка выбранного варианта СУБД, но так же поддерживается определение, если `hostname` сервера начинается на `1c` то программа предлагает установить `Special Edition for 1C`.
    - На этом этапе требуется указать в переменных `NEXUS_USER, NEXUS_PASSWORD и NEXUS_URL`.
2. Создаются директории для субд, выставляются нужные привилегии и владелец.
3. Если ОС работает в режиме - `Смоленск`, то применяется, повышении привилегий для пользователя `postgres`.
4. Настраивается переменная окружения `PGDATA` для пользователя `postgres`.
5. Инициализация БД.
6. Настраивается переменная `PGDATA` в юните сервиса для СУБД Tantor, обновляется конфигурация юнита, производится перезапуск СУБД и включение его в автозагрузку.
7. Определяется автоматически размер `shared_buffers` для субд, но есть возможность задать вручную.
8. Если сервер продуктивный, то каталог `pg_wal` необходимо перенести на отдельную файловую систему, это будет сделано автоматически.
9. Изменяется пароль для пользователя `postgres` в ОС и в СУБД Tantor.
10. Производится настройка файла конфигурации `postgresql.conf`:
    - `listen_addresses = '*'`
    - `max_connections = 1000`
    - `shared_buffers = размер зависит от выполненных действий на 7 этапе`
11. Так же есть возможность задать ip адрес пользователя в `pg_hba.conf` для подключения к СУБД по протоколу ipv4. Требуется указать только ip адрес.
12. Запускается СУБД Tantor.
